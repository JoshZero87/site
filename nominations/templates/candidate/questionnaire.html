{% extends "pages/base_page.html" %}

{% load bootstrap3 %}
{% load crispy_forms_tags %}


{% block page_title %}Our Revolution - Nominate a Candidate or Ballot Initiative{% endblock %}

{% block content %}

<div class="container-fluid">
  <div class="row blue-bg white-text pb3">
    <div class="back-bar clearfix">
      <div class="container clearfix">
        <span class="pull-left"><a href="/groups/nominations/candidate/dashboard">&lsaquo; Back</a></span>
      </div>
    </div>
    <div class="container pt3">
      <div class="col-md-8 col-md-offset-2">
        <h1 class="mb0 mt0">Candidate Questionnaire</h1>
        <p class="fs18">Congratulations on receiving an endorsement nomination from a local Our Revolution group! In order for us to consider your candidacy for a national endorsement, you must fill out and submit the following questionnaire. The office you are seeking may not have jurisdiction over some of these issues. However, the following questions are aimed to assess how aligned you are with our national platform and will be taken as your official stance.</p>
        
        <p class="fs18"><strong>Please keep in mind that the following factors will be considered key for our decision to move forward with a national endorsement:</strong></p>
        
        <div class="pa20 br3 light-wash clearfix mb20">
          <ol class="fs18">
            <li><strong>Values:</strong> How aligned is the candidate with Our Revolution’s values?</li>
            <li><strong>Viability:</strong> Historical voting data, including voter turnout and previous election party breakdown, is a good indicator of how an election may turn out. This information will give an indication of how much effort a candidate will need to exert and invest in order to win.</li>
            <li><strong>Fundraising and Origin of Candidate’s Campaign Contributions:</strong> Does the candidate have the ability to raise money to make him/her competitive without having to compromise their values?</li>
          </ol>
        </div>

        <p class="pa20 br3 light-wash">Fields marked * are required, and each question has a 1000 character limit.</p>        
      </div>
    </div>
  </div>

  <div class="row pt2 pb2">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          {% if not questionnaire.status == 'complete' %}
            <form action="" method="POST" class="row">
              {{ formset.management_form|crispy }}
              {% crispy form %}
              
              <div class="col-md-12">
                {% for form in formset %}
                  {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                  {% endfor %}
                  <div class="form-group pa20 br3 f5f5f5-bg">
                    <label class="control-label pa20 br3 white-bg mb20 fs16 block" required>{{forloop.counter}}. {{form.instance.question.text}}*</label>
                    {% crispy form helper %}
                  </div>
                {% endfor %}
                <button type='submit' value='Submit' class='btn btn-block btn-primary uppercase ls2'>Next</button>
              </div>
            </form>
          {% else %}  
          {% for form in formset %}
            <div class="form-group pa20 br3 f5f5f5-bg">
              <label class="control-label pa20 br3 white-bg mb20 fs16 block" required>{{forloop.counter}}. {{form.instance.question.text}}*</label>
              {% if form.instance.question.include_multi_choice %}
                <p class="pa20 br3 white-bg mt0">{{form.instance.get_response_display}}</p>
              {% endif %}
              <p class="pa20 br3 white-bg mt0 mb0">{{form.instance.position}}</p>
            </div>
          {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// TODO: implement this on server side in a non janky way
// we don't want the response field on question 23 but it's required

$(document).ready(function(){
  $('#id_questions-23-response').val("a")
  $('#div_id_questions-23-response').hide()
});
</script>

{% endblock %}
